<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AISpace2 &mdash; Reference</title>
  <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Muli:400,700|Overpass+Mono" rel="stylesheet">
  <link href="assets/styles/style.css" rel="stylesheet">
  <script src="assets/scripts/siema.min.js"></script>
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-105176225-2', 'auto');
    ga('send', 'pageview');
  </script>
</head>

<body>
  <div id="navbar">
    <a href="index.html">Home</a>
    <a href="install.html">Install</a>
    <a href="notebooks.html">Notebooks</a>
    <a href="contribute.html">Contribute</a>
    <a href="reference.html" class="selected">Reference</a>
  </div>

  <header>
    <h1>Reference</h1>
    <h2>The details of AISpace2.</h2>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none">
      <polygon fill="#ebf4ee" points="0,100 100,0 100,100" />
    </svg>
  </header>

  <section class="column inline">
    <h1>Table of Contents</h1>
    <ul>
      <li><a href="#reference-common">Common</a></li>
      <li><a href="#reference-search">Search</a></li>
      <li><a href="#reference-csp">CSP</a></li>
      <li><a href="#difference-aispace2-aipython">Difference between AISpace2 and AIPython</a></li>
    </ul>
  </section>

  <section id="reference-common" class="column inline">
    <h2 id="common" class="linkify"><a href="#reference-common">Common</a></h2>
    <h3 id="reference-common-buttons" class="linkify"><a href="#reference-common-buttons">Buttons</a></h3>
    <p>
      <img src="assets/images/reference-common-controls.png" alt="Main visualizations controls" </img></p>
    <ul>
      <li><strong>Fine Step</strong>: Advance the procedure to next fine step.</li>
      <li><strong>Step</strong>: Advance the procedure to next step</li>
      <li><strong>Auto Solve</strong>: Run the algorithm step by step until completion.</li>
      <li><strong>Pause</strong>: Pauses as soon as this fine step has finished. Useful to stop auto
        solving.
      </li>
    </ul>
    <p>You can resize the height of the visualization by dragging the resize handle (<span style="display: inline-block; width: 10px; height: 10px; background: #727272"></span>)
      in the bottom right corner. The width of the visualization can be changed by resizing the window. In either case, the
      nodes will reposition themselves until they all fit on screen.</p>
    <h3 id="reference-common-visualization-options" class="linkify"><a href="#reference-common-visualization-options">Visualization Options</a></h3>
    <ul>
      <li><code>sleep_time</code>: The time, in seconds, between each step in auto solving. Defaults to <code>0.2</code>.
      </li>
      <li><code>line_width</code>: The thickness of edges, in pixels. Defaults to <code>4.0</code>.</li>
      <li><code>text_size</code>: The fontsize of the text, in pixels. Defaults to <code>15</code>.</li>
      <li><code>detail_level</code>: The detail level of the information shown on a node. <code>0</code>=showing no text; 
        <code>1</code>=showing truncated text when the space is not enough; <code>2</code>=always showing full text. 
        Defaults to <code>1</code>.</li>
    </ul>
    <h3 id="reference-common-notes" class="linkify"><a href="#reference-common-notes">Notes about <code>display()</code></a></h3>
    <ul>
      <li>The first parameter of each <code>display()</code> call is the <code>display_level</code>, which, depending on the
        step button, controls when execution pauses. Fine Step button makes the execution pause each time a <code>display()</code> 
        statement is encountered; Step button makes the execution pause each time a <code>display()</code> with <code>display_level 2</code>
        or lower is encoutered; Auto Solve button makes the exectution not pause at all. You can safely change the <code>display_level</code> to adjust the amount
        of detail you receive.</li>
      <li>
        The visualization is entirely driven by the remaining parameters of the <code>display()</code> call, so modifying
        them may break the visualization.
      </li>
    </ul>
  </section>


  <section id="reference-search" class="column inline">
    <h2 class="linkify"><a href="#reference-search">Search</a></h2>
    <h3 id="reference-search-user-guide" class="linkify"><a href="#reference-search-user-guide">Nodes Legens</a></h3>
    <p>
      <svg viewBox="0 0 42 32">
        <ellipse rx="20" ry="15" fill="orchid" stroke="black" stroke-width="1" cx="21" cy="16"></ellipse>
      </svg>&mdash; the start node is filled in pinks.
    </p>
    <p>
      <svg viewBox="0 0 42 32">
        <ellipse rx="20" ry="15" fill="white" stroke="black" stroke-width="1" cx="21" cy="16"></ellipse>
      </svg>&mdash; the regular nodes are filled in white.
    </p>
    <p>
      <svg viewBox="0 0 42 32">
        <ellipse rx="20" ry="15" fill="gold" stroke="black" stroke-width="1" cx="21" cy="16"></ellipse>
      </svg>&mdash; the goal nodes are filled in yellow.
    </p>
    <p>
      <svg viewBox="0 0 44 34">
        <ellipse rx="20" ry="15" fill="white" stroke="green" stroke-width="3" cx="22" cy="17"></ellipse>
      </svg>&mdash; the nodes at the end of each path on the frontier are outlined in green.</p>
    <p>
      <svg viewBox="0 0 130 38">
        <path data-v-6814c63b="" d="M40,19L80,19" stroke="blue" stroke-width="4"></path>
        <polygon data-v-6814c63b="" points="0 0 4 2 0 4" transform="translate(74, 17)" stroke="blue" fill="blue" stroke-width="7"></polygon>
        <ellipse rx="20" ry="15" fill="white" stroke="black" stroke-width="1" cx="21" cy="19"></ellipse>
        <ellipse rx="20" ry="15" fill="gold" stroke="blue" stroke-width="3" cx="105" cy="19"></ellipse>
      </svg>
      &mdash; the neighbouring nodes of the current path are outlined in blue.</p>
    <p>
      <svg viewBox="0 0 220 38">
        <path data-v-6814c63b="" d="M40,19L80,19" stroke="red" stroke-width="4"></path>
        <polygon data-v-6814c63b="" points="0 0 4 2 0 4" transform="translate(74, 17)" stroke="red" fill="blue" stroke-width="7"></polygon>
        <path data-v-6814c63b="" d="M125,19L165,19" stroke="red" stroke-width="4"></path>
        <polygon data-v-6814c63b="" points="0 0 4 2 0 4" transform="translate(158, 17)" stroke="red" fill="blue" stroke-width="7"></polygon>
        <ellipse rx="20" ry="15" fill="orchid" stroke="red" stroke-width="3" cx="22" cy="19"></ellipse>
        <ellipse rx="20" ry="15" fill="white" stroke="red" stroke-width="3" cx="105" cy="19"></ellipse>
        <ellipse rx="20" ry="15" fill="gold" stroke="red" stroke-width="3" cx="189" cy="19"></ellipse>
      </svg>
      &mdash; the path being expanded is outlined in red.
      in gray.</p>
    <h3 id="reference-search-supported-classes" class="linkify"><a href="#reference-search-supported-classes">Supported Classes</a></h3>
    <p><code>Searcher</code>, <code>AStarSearcher</code>, <code>SearcherMPP</code>, <code>DF_branch_and_bound</code></p>
    <h3 id="reference-search-included-problems" class="linkify"><a href="#reference-search-included-problems">Included Problems</a></h3>
    <p>
      <div class="siema">
        <div>
          <figure>
            <img src="assets/images/simple_problem1.png" alt="Search Problem 1" />
            <figcaption>
              <code>simple_problem1</code>: A simple search problem.
            </figcaption>
          </figure>
        </div>
        <div>
          <figure>
            <img src="assets/images/simple_problem2.png" alt="Search Problem 2" />
            <figcaption>
              <code>simple_problem2</code>: Another simple search problem.
            </figcaption>
          </figure>
        </div>
        <div>
          <figure>
            <img src="assets/images/edgeless_problem.png" alt="Search Problem 3" />
            <figcaption>
              <code>edgeless_problem</code>: A search problem where there are no edges.
            </figcaption>
          </figure>
        </div>
        <div>
          <figure>
            <img src="assets/images/acyclic_delivery_problem.png" alt="Acyclic Search Problem" />
            <figcaption>
              <code>acyclic_delivery_problem</code>: A robot delivery problem that has no cycles.
            </figcaption>
          </figure>
        </div>
        <div>
          <figure>
            <img src="assets/images/cyclic_delivery_problem.png" alt="Cyclic Search Problem" />
            <figcaption>
              <code>cyclic_delivery_problem</code>: A robot delivery problem that has cycles.
            </figcaption>
          </figure>
        </div>
      </div>
    </p>
    <h3 id="reference-search-visualization-options" class="linkify"><a href="#reference-search-visualization-options">Visualization Options</a></h3>
    <ul>
      <li><code>show_edge_costs</code>: If <code>True</code>, shows the cost of each edge along the line. Defaults to <code>True</code>.
      </li>
      <li><code>show_node_heuristics</code>: If <code>True</code>, show the node's heuristic value (h-value) inside the node.
        Defaults to <code>False</code>.
      </li>
      <li>
        <code>layout_method</code>: Controls how the nodes in the graph are positioned. Either <code>"force"</code>, which
        is a general graph layout algorithm that works on graphs of all types, or <code>"tree"</code>, if you know the resulting
        graph is always tree-shaped. Defaults to
        <code>"force"</code>.
    </ul>
  </section>


  <section id="reference-csp" class="column inline">
    <h2 id="csp" class="linkify"><a href="#reference-csp">CSP</a></h2>
    <h3 id="reference-csp-user-guide" class="linkify"><a href="#reference-csp-user-guide">User Guide</a></h3>
    <p>
      <svg viewBox="0 0 30 20">
        <line x1="0" x2="30" y1="10" y2="10" stroke="blue" stroke-width="5"></line>
      </svg> &mdash; the arc needs to be checked to see if it is arc consistent.</p>
    <p>
      <svg viewBox="0 0 30 20">
        <line x1="0" x2="30" y1="10" y2="10" stroke="green" stroke-width="5"></line>
      </svg> &mdash; the arc is arc consistent.</p>
    <p>
      <svg viewBox="0 0 30 20">
        <line x1="0" x2="30" y1="10" y2="10" stroke="red" stroke-width="5"></line>
      </svg> &mdash; the arc is not arc consistent.</p>
    <p>You can click on any blue or red arc to perform arc consistency on that arc. Otherwise, a random arc is chosen when you
      step. After arc consistency is finished, and you are running a function that performs domain splitting (e.g. <code>solve_one()</code>),
      you can click a node to split its domain.</p>
    <h3 id="reference-csp-supported-classes" class="linkify"><a href="#reference-csp-supported-classes">Supported Classes</a></h3>
    <p><code>Con_solver</code>, <code>SLSearcher</code></p>
    <h3 id="reference-csp-included-problems" class="linkify"><a href="#reference-csp-included-problems">Included Problems</a></h3>
    <div class="siema">
      <div>
        <figure>
          <img src="assets/images/simple_csp1.png" alt="CSP 0" />
          <figcaption>
            <code>simple_csp1</code>: A simple CSP.
          </figcaption>
        </figure>
      </div>
      <div>
        <figure>
          <img src="assets/images/simple_csp2.png" alt="CSP 1" />
          <figcaption>
            <code>simple_csp2</code>: Another simple CSP.
          </figcaption>
        </figure>
      </div>
      <div>
        <figure>
          <img src="assets/images/extended_csp.png" alt="CSP 2" />
          <figcaption>
            <code>extended_csp</code>: A more complex CSP.
          </figcaption>
        </figure>
      </div>
      <div>
        <figure>
          <img src="assets/images/crossword1.png" alt="CSP Crossword 1" />
          <figcaption>
            <code>crossword1</code>: A crossword that represents word positions as variables.
          </figcaption>
        </figure>
      </div>
      <div>
        <figure>
          <img src="assets/images/crossword2.png" alt="CSP Crossword 2" />
          <figcaption>
            <code>crossword2</code>: Another crossword that represents word positions as variables.
          </figcaption>
        </figure>
      </div>
      <div>
        <figure>
          <img src="assets/images/crossword2d.png" alt="CSP Crossword 2d" />
          <figcaption>
            <code>crossword2d</code>: A crossword that represents squares as variables.
          </figcaption>
        </figure>
      </div>
    </div>
  </section>


  <section class="column inline">
    <h2 id="difference-aispace2-aipython" class="linkify"><a href="#difference-aispace2-aipython">Relationship between AISpace2 and AIPython</a></h2>
    <p><a href="http://artint.info/AIPython/">AIPython</a> is the Python code for the pseudocode found inside the <a href="http://artint.info/">accompanying textbook</a>;
      AISpace2 takes the code from AIPython and enhances it to work inside Jupyter, allowing for rich visualizations to accompany
      code.
    </p>

    <p>In order to make this possible, two things were changed from the code in AIPython to the code you see inside AISpace2.
      Everything else is identical.</p>

    <ol>
      <li>
        <p>The additional of the <code>@visualize</code> decorator: All functions that you call <em>directly</em> on the instance
          to be visualized within a cell must have their definitions annotated with <code>@visualize</code>. For example,
          if we had the following class:</p>

        <!-- HTML generated using hilite.me -->
        <pre style="margin: 0; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Example</span><span style="color: #d0d0d0">():</span>
  <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">bar</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
    <span style="color: #6ab825; font-weight: bold">print</span><span style="color: #d0d0d0">(</span><span style="color: #ed9d13">&#39;bar&#39;</span><span style="color: #d0d0d0">)</span>
  
  <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">foo</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
    <span style="color: #24909d">self</span><span style="color: #d0d0d0">.bar()</span>
    <span style="color: #6ab825; font-weight: bold">print</span><span style="color: #d0d0d0">(</span><span style="color: #ed9d13">&#39;foo&#39;</span><span style="color: #d0d0d0">)</span>
</pre>

        <p>and there was a cell inside Jupyter like this:</p>

        <!-- HTML generated using hilite.me -->
        <pre><span style="color: #d0d0d0">e</span> <span style="color: #d0d0d0">=</span> <span style="color: #447fcf; text-decoration: underline">Example()</span>
<span style="color: #d0d0d0">e.foo()</span>
</pre>

        <p>Then <code>foo</code> would have to be annotated, because it is called directly on the instance inside a cell; but
          <code>bar</code> wouldn't need to be annotated, because it is only called indirectly by <code>foo</code>. Annotating
          <code>foo</code> is as simple as adding a single line right above the declaration:</p>

        <!-- HTML generated using hilite.me -->
        <pre style="margin: 0; line-height: 125%"><span style="color: #ffa500">@visualize</span>
<span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">foo</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
  <span style="color: #24909d">self</span><span style="color: #d0d0d0">.bar()</span>
  <span style="color: #6ab825; font-weight: bold">print</span><span style="color: #d0d0d0">(</span><span style="color: #ed9d13">&#39;foo&#39;</span><span style="color: #d0d0d0">)</span>
</pre>

        <p>On the other hand, if you also wanted to call <code>e.bar()</code> directly (either in the same cell or another),
          you would have to also add <code>@visualize</code> to <code>bar</code> as well.</p>

        <p>The reason why this is necessary is to support interacting with visualizations. AISpace2 needs to know which functions
          will drive the visualization, so that it can set things up correctly.</p>
      </li>
      <li>
        <p>Change in imports: <code>Displayable</code> subclasses inherit from <code>aipython.utilities.Displayable</code> in
          AIPython, but inherit from <code>aispace2.jupyter.*</code> inside AISpace2 (where <code>*</code> depends on the
          algorithm being visualized). The <code>@visualize</code> decorator can also be imported from the same package.</p>

        <p>The reason why this change is necessary is that these specialized <code>Displayable</code> classes have hooks that
          allow it to be displayed inside Jupyter.</p>
      </li>
    </ol>
  </section>


  <script>
    var siemas = document.querySelectorAll('.siema');
    siemas.forEach(function (siema) {
      new Siema({
        selector: siema,
        threshold: 50
      })
    });
  </script>
</body>

</html>
